<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quản lý Nhà Văn hóa - Hệ thống quản trị dân cư</title>
  <link rel="stylesheet" href="assets/css/layout.css" />
  <link rel="stylesheet" href="assets/css/style.css" />
  <link rel="stylesheet" href="assets/css/residents.css" /> 
  <link rel="stylesheet" href="assets/css/nvh.css" /> 
</head>

<body>
  <div id="navbar"></div>
  <main class="dashboard">
    <aside id="sidebar"></aside>

    <section class="content-section">
      <h2 class="page-title"><i class="fas fa-landmark" aria-hidden="true"></i> Quản lý Nhà Văn hóa</h2>

      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('assets')">Quản lý Tài sản</button>
        <button class="tab-btn" onclick="switchTab('events')">Lịch & Sự kiện</button>
      </div>

      <div id="tab-assets" class="tab-content active">
        <div class="card content-card form-card">
          <div class="card-header">
            <i class="fas fa-filter"></i>
            <h3>Tìm kiếm tài sản</h3>
          </div>
          <div class="card-body">
            <div class="content-header" style="margin-bottom:0; display:flex; gap:12px; align-items:center;">
              <div class="search-container" style="flex:1;">
                <div class="search-input-wrapper">
                  <i class="fas fa-search"></i>
                  <input type="text" id="assetSearchInput" class="search-input" placeholder="Tìm kiếm tài sản theo tên hoặc mã..." />
                </div>
              </div>
              <button id="btnAddAsset" class="btn btn-primary action-btn" style="display:none" onclick="openAssetModal()">+ Thêm Tài Sản</button>
            </div>
          </div>
        </div>

        <div class="card content-card table-card">
          <div class="card-header">
            <i class="fas fa-list-alt"></i>
            <h3>Danh sách Tài sản</h3>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Mã</th>
                    <th>Tên Tài Sản</th>
                    <th>Đơn vị</th>
                    <th>SL Tốt</th>
                    <th>SL Hỏng</th>
                    <th>Tổng</th>
                    <th>Thao tác</th>
                  </tr>
                </thead>
                <tbody id="tbody-assets"></tbody>
              </table>
            </div>
            <div class="table-footer"><!-- pagination placeholder --></div>
          </div>
        </div>
      </div>

      <div id="tab-events" class="tab-content">
        <div class="card content-card form-card">
          <div class="card-header">
            <i class="fas fa-filter"></i>
            <h3>Tìm kiếm sự kiện</h3>
          </div>
          <div class="card-body">
            <div class="content-header" style="margin-bottom:0; display:flex; gap:12px; align-items:center;">
              <div class="search-container" style="flex:1; display:flex; gap:12px; align-items:center;">
                <div class="search-input-wrapper" style="flex:1;">
                  <i class="fas fa-search"></i>
                  <input type="text" id="eventSearchInput" class="search-input" placeholder="Tìm kiếm sự kiện theo tên..." />
                </div>
                <div class="search-filters">
                  <select id="eventTypeFilter" class="filter-select">
                    <option value="">-- Tất cả loại --</option>
                    <option value="HopToDanPho">Họp tổ dân phố</option>
                    <option value="VeSinhMoiTruong">Vệ sinh/Tuyên truyền</option>
                    <option value="VanHoaGiaiTri">Sự kiện/Đám cưới</option>
                  </select>
                </div>
              </div>
              <button id="btnAddEvent" class="btn btn-primary action-btn" style="display:none" onclick="openEventModal()">+ Đăng ký / Tạo lịch</button>
            </div>
          </div>
        </div>

        <div class="card content-card table-card">
          <div class="card-header">
            <i class="fas fa-list-alt"></i>
            <h3>Danh sách hoạt động</h3>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Tên sự kiện</th>
                    <th>Thời gian</th>
                    <th>Loại</th>
                    <th>Trạng thái</th>
                    <th>Phí</th>
                    <th>Thao tác</th>
                  </tr>
                </thead>
                <tbody id="tbody-events"></tbody>
              </table>
            </div>
            <div class="table-footer"><!-- pagination placeholder --></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div id="modal-asset" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header"><h3>Thông tin tài sản</h3><button class="close-btn" onclick="closeModal('modal-asset')">&times;</button></div>
      <div class="modal-body">
        <form id="form-asset">
            <input type="hidden" id="asset-id">
            <div class="form-group"><label>Tên tài sản</label><input type="text" id="asset-name" required></div>
            <div class="form-group"><label>Đơn vị tính</label><input type="text" id="asset-unit" required value="Cái"></div>
            <div class="info-grid">
                <div class="form-group"><label>Số lượng Tốt</label><input type="number" id="asset-good" required min="0"></div>
                <div class="form-group"><label>Số lượng Hỏng</label><input type="number" id="asset-bad" required min="0"></div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Lưu</button>
            </div>
        </form>
      </div>
    </div>
  </div>

  <div id="modal-event" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header"><h3>Đăng ký sử dụng Nhà văn hóa</h3><button class="close-btn" onclick="closeModal('modal-event')">&times;</button></div>
      <div class="modal-body">
        <form id="form-event">
            <div class="form-group">
                <label>Loại hoạt động</label>
                <select id="evt-type" onchange="toggleFeeInput()">
                    <option value="HopToDanPho">Họp tổ dân phố (Miễn phí)</option>
                    <option value="VeSinhMoiTruong">Vệ sinh/Tuyên truyền (Miễn phí)</option>
                    <option value="VanHoaGiaiTri">Thuê tổ chức sự kiện(Có phí)</option>
                </select>
            </div>
            <div class="form-group"><label>Tên hoạt động</label><input type="text" id="evt-name" required placeholder="VD: Đám cưới nhà ông A..."></div>
            <div class="info-grid">
                <div class="form-group"><label>Bắt đầu</label><input type="datetime-local" id="evt-start" required></div>
                <div class="form-group"><label>Kết thúc</label><input type="datetime-local" id="evt-end" required></div>
            </div>
            <div class="form-group hidden" id="div-fee">
                <label>Phí dự kiến (VNĐ)</label>
                <input type="number" id="evt-fee" value="0">
            </div>
            <div class="form-group"><label>Mô tả chi tiết</label><textarea id="evt-desc" class="form-control"></textarea></div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Gửi đăng ký</button>
            </div>
        </form>
      </div>
    </div>
  </div>

  <script src="assets/js/layout.js"></script>
  <script src="assets/js/facilities.js"></script> </body>
</html>